{"ast":null,"code":"const express = require('express');\nconst serverless = require('serverless-http');\nconst mongoose = require('mongoose');\nconst cors = require('cors');\nconst app = express();\n\n// Middleware\napp.use(cors());\napp.use(express.json());\n\n// MongoDB connection with caching\nlet cachedDb = null;\nasync function connectToDatabase() {\n  if (cachedDb) {\n    return cachedDb;\n  }\n  try {\n    const db = await mongoose.connect(process.env.MONGODB_URI, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n    cachedDb = db;\n    console.log('MongoDB Connected');\n    return db;\n  } catch (error) {\n    console.error('MongoDB connection error:', error);\n    throw error;\n  }\n}\n\n// Import your models\nconst Project = require('../../server/models/project');\nconst Skill = require('../../server/models/Skill');\nconst Contact = require('../../server/models/Contact');\n\n// Routes\napp.get('/api', (req, res) => {\n  res.json({\n    message: 'API is working!'\n  });\n});\napp.get('/api/projects', async (req, res) => {\n  try {\n    await connectToDatabase();\n    const projects = await Project.find();\n    res.json(projects);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\napp.get('/api/skills', async (req, res) => {\n  try {\n    await connectToDatabase();\n    const skills = await Skill.find();\n    res.json(skills);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\napp.post('/api/contact', async (req, res) => {\n  try {\n    await connectToDatabase();\n    const {\n      name,\n      email,\n      message\n    } = req.body;\n    const contact = new Contact({\n      name,\n      email,\n      message\n    });\n    await contact.save();\n    res.json({\n      message: 'Contact form submitted successfully',\n      contact\n    });\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\n\n// Export as serverless function\nexports.handler = serverless(app);","map":{"version":3,"names":["express","require","serverless","mongoose","cors","app","use","json","cachedDb","connectToDatabase","db","connect","process","env","MONGODB_URI","useNewUrlParser","useUnifiedTopology","console","log","error","Project","Skill","Contact","get","req","res","message","projects","find","status","skills","post","name","email","body","contact","save","exports","handler"],"sources":["C:/Users/NDICHU/portifolio/protifolio/client/src/utils/api.js"],"sourcesContent":["const express = require('express');\r\nconst serverless = require('serverless-http');\r\nconst mongoose = require('mongoose');\r\nconst cors = require('cors');\r\n\r\nconst app = express();\r\n\r\n// Middleware\r\napp.use(cors());\r\napp.use(express.json());\r\n\r\n// MongoDB connection with caching\r\nlet cachedDb = null;\r\n\r\nasync function connectToDatabase() {\r\n  if (cachedDb) {\r\n    return cachedDb;\r\n  }\r\n  \r\n  try {\r\n    const db = await mongoose.connect(process.env.MONGODB_URI, {\r\n      useNewUrlParser: true,\r\n      useUnifiedTopology: true,\r\n    });\r\n    cachedDb = db;\r\n    console.log('MongoDB Connected');\r\n    return db;\r\n  } catch (error) {\r\n    console.error('MongoDB connection error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Import your models\r\nconst Project = require('../../server/models/project');\r\nconst Skill = require('../../server/models/Skill');\r\nconst Contact = require('../../server/models/Contact');\r\n\r\n// Routes\r\napp.get('/api', (req, res) => {\r\n  res.json({ message: 'API is working!' });\r\n});\r\n\r\napp.get('/api/projects', async (req, res) => {\r\n  try {\r\n    await connectToDatabase();\r\n    const projects = await Project.find();\r\n    res.json(projects);\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\napp.get('/api/skills', async (req, res) => {\r\n  try {\r\n    await connectToDatabase();\r\n    const skills = await Skill.find();\r\n    res.json(skills);\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\napp.post('/api/contact', async (req, res) => {\r\n  try {\r\n    await connectToDatabase();\r\n    const { name, email, message } = req.body;\r\n    const contact = new Contact({ name, email, message });\r\n    await contact.save();\r\n    res.json({ message: 'Contact form submitted successfully', contact });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// Export as serverless function\r\nexports.handler = serverless(app);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}